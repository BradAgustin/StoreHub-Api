<div class="p-3">
  <h1>Historial de Movimientos</h1>
  <p class="text-gray-500">Auditoría de entradas y salidas de almacén.</p>
  <mat-card>
    <table mat-table [dataSource]="movements" class="w-full">
      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef> Tipo </th>
        <td mat-cell *matCellDef="let m">
          <span [class]="m.type === 'IN' ? 'text-green-600 font-bold' : (m.type === 'ADJ' ? 'text-orange-500 font-bold' : 'text-red-600 font-bold')">
            {{ m.type === 'IN' ? 'ENTRADA' : (m.type === 'OUT' ? 'SALIDA' : 'AJUSTE') }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="product"><th mat-header-cell *matHeaderCellDef>Producto</th><td mat-cell *matCellDef="let m">{{m.product_name}}</td></ng-container>
      <ng-container matColumnDef="qty"><th mat-header-cell *matHeaderCellDef>Cant.</th><td mat-cell *matCellDef="let m">{{m.quantity}}</td></ng-container>
      <ng-container matColumnDef="reason"><th mat-header-cell *matHeaderCellDef>Motivo</th><td mat-cell *matCellDef="let m">{{m.reason}}</td></ng-container>
      <ng-container matColumnDef="date"><th mat-header-cell *matHeaderCellDef>Fecha</th><td mat-cell *matCellDef="let m">{{m.date | date:'short'}}</td></ng-container>
      <tr mat-header-row *matHeaderRowDef="['type','product','qty','reason','date']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['type','product','qty','reason','date'];"></tr>
    </table>
    <div *ngIf="movements.length === 0" class="p-4 text-center text-gray-500">No hay movimientos registrados aún.</div>
  </mat-card>
</div>
